# Vehicle Agent Protocol (VAP)

> ‚öôÔ∏è Current version: **0.2.0** ‚Äî May 2025

**Vehicle Agent Protocol (VAP)** is an open protocol for communication between intelligent software agents operating in or around vehicles.

It provides a common message format for exchanging information such as events, recommendations, queries and alerts ‚Äî allowing vehicles, fleets, and backend systems to interact in a structured, decentralized and vendor-agnostic way (i.e. not tied to any specific brand or platform).

VAP is designed to support both closed systems and open networks of agents, enabling new forms of vehicle collaboration, predictive maintenance, and shared knowledge between connected actors.

---

## üåê Objectives

- Define a common format for communication between vehicle agents.
- Facilitate interoperability between different agent implementations.
- Enable a decentralized, collaborative network of vehicle assistants.

---

## üõ∞Ô∏è Transport mechanisms

Transport layer options (e.g., MQTT, WebSocket, REST) are currently under review.

The VAP message format is **transport-agnostic**, meaning it can be used over different communication channels depending on the architecture (peer-to-peer, centralized, edge-to-cloud, etc.).

For updates and drafts, see: [docs/transport.md](docs/transport.md)

---

## üì¶ Basic Message Structure (Example: `event`)

```json
{
  "message_type": "event",
  "sender_id": "vehicle:ABC123",
  "receiver_id": "fleet:FLEET001",
  "timestamp": "2025-05-16T08:32:00Z",
  "event": {
    "name": "engine_noise_detected",
    "severity": "medium",
    "location": "engine_bay",
    "confidence": 0.87
  },
  "metadata": {
    "vehicle_model": "Toyota Corolla 2021",
    "agent_version": "1.2.4",
    "language": "en-US"
  }
}
```

---

## üóÇÔ∏è Message Types (`message_type`)

| Type            | Description                                              |
|------------------|----------------------------------------------------------|
| `event`          | Alert or signal generated by an agent                    |
| `query`          | A question sent from one agent to another                |
| `response`       | A reply to a `query` message                             |
| `sync_state`     | Periodic exchange of current status or shared context    |
| `notification`   | General system message (not addressed to a specific agent) |

---

## üßæ Example Messages by Type

### `query`: Request for a recommended workshop in Zaragoza

```json
{
  "message_type": "query",
  "sender_id": "vehicle:ABC123",
  "receiver_id": "vehicle:XYZ987",
  "timestamp": "2025-05-16T09:00:00Z",
  "query": {
    "type": "recommendation",
    "topic": "maintenance_shop",
    "location": "Zaragoza"
  }
}
```

---

### `response`: Recommendation returned

```json
{
  "message_type": "response",
  "sender_id": "vehicle:XYZ987",
  "receiver_id": "vehicle:ABC123",
  "timestamp": "2025-05-16T09:01:12Z",
  "response": {
    "type": "recommendation",
    "data": {
      "name": "Bosch Service Zaragoza",
      "rating": 4.7,
      "last_used": "2024-12-10"
    }
  }
}
```

---

### `sync_state`: Report from a vehicle to a fleet system

```json
{
  "message_type": "sync_state",
  "sender_id": "vehicle:CUPRA21-HYB",
  "receiver_id": "fleet:FLEET02-ESP",
  "timestamp": "2025-05-16T10:20:00Z",
  "sync_state": {
    "fuel_level": 36,
    "battery_health": "good",
    "mileage": 48720,
    "next_inspection_due": "2025-06-30"
  }
}
```

---

### `notification`: Global recall advisory

```json
{
  "message_type": "notification",
  "sender_id": "system:autonality.ai",
  "receiver_id": "ALL",
  "timestamp": "2025-05-16T11:00:00Z",
  "notification": {
    "type": "recall_advisory",
    "topic": "brake_hose_inspection",
    "models_affected": ["CUPRA Leon 2021-2022", "Golf 8 2020-2021"],
    "source": "official_bulletin_132/2025",
    "note": "Early signs detected by 17 agents. Recommended to inspect before summer."
  }
}
```
---

---

## üîê Agent Identifier Format

Every message must include a `sender_id` and a `receiver_id` using the following structured format:

| Identifier Type      | Format Example         | Description                              |
|----------------------|------------------------|------------------------------------------|
| Vehicle agent        | `vehicle:ABC123`       | Individual vehicle agent                 |
| Fleet agent          | `fleet:FLEET001`       | Company-owned or managed vehicle fleet   |
| User agent           | `user:johndoe`         | A human user agent                       |
| System/backend agent | `system:autonality.ai` | Server, orchestrator or coordination hub |

These identifiers allow messages to be routed between agents in a vendor-neutral and semantically meaningful way.

---

## üìò License

This project is licensed under the [MIT License](LICENSE), which permits open use, modification, and distribution with attribution.

---

## ü§ù Contributions

We welcome suggestions, extensions, and compatible agent implementations in any language.  
Feel free to fork this repo, open an issue, or submit a pull request.

---

## üì¨ Contact

Created and maintained by [autonality.ai](https://autonality.ai)  
For questions, suggestions or collaborations, contact: **echacon911@gmail.com**
